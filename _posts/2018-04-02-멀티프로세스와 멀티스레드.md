---
layout: post
title: 멀티스레드와 멀티프로세스는 어떻게 다른가
categories: [interview]
tags: [thread, process, server]
---

오늘 봤던 면접 중 대답하지 못한 질문에 대해서 다시한번 정리한다.<br>
평소에 스레드와 프로세스에 대해서 어렴풋이 알고 있었지만, 멀티단위로 동작하게 될 경우에 대해서는 제대로 생각해본적이 없다.

먼저 프로세스와 스레드가 무엇인지에 대해서 알아보자

## Process 와 Thread
----

  - **process** : *컴퓨터에서 연속적으로 실행되고 있는 프로그램*

  - **thread** : *프로세스 내에서 실행되는 여러 흐름의 단위*

간단하게 말하자면, 스레드는 프로세스 내에서 동작하는 일꾼 이라고 할 수 있다.

한 프로세스내에서는 다수의 스레드가 동작할 수 있는데 다수의 스레드는 한 프로세스의 자원(Code, Data, Heap 공간)을 공유하게 된다.

## MultiProcess 와 MultiThread
----

문자 그대로 다수의 프로세스와 다수의 스레드가 동작하는 것을 의미한다.
자원의 사용방법에 따라서 차이점을 보이는데, 먼저 Context Switching 에 대해서 알아보고 넘어가자.

  - **context Switching** : *문맥교환(Context Switching) 이란 하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스의 상태(문맥)를 보관하고 새로운 프로세스의 상태를 적재하는 작업을 말한다.*

왜 컨텍스트 스위칭부터 개념을 설명했냐면, 멀티프로세스에서는 이 컨텍스트 스위칭이 발생하는 구조이기 때문이다. (컨텍스트 스위칭이 발생할 경우 캐쉬 메로리를 초기화 하는 작업을 수행한다.)

멀티프로세스는 대상이 되는 프로세스를 포크하는 작업을 실행한다. 이렇게 복사된 프로세스는 이전 프로세스와는 별도의 공간(Code, Data, Heap) 을 가지며 위에서 설명한 컨텍스트 스위칭이 발생하게 된다.

이에 반해서, 멀티스레는 한 프로세스내에서 자원을 공유하기 때문에 스레드간에 데이터를 주고 받는 것이 간단해 지고 자원 소모가 현저히 줄어들게 된다.

----

각각 장단점을 정리하자면 아래와 같다.

### 1. 멀티프로세스

장점 | 단점
---- | ----
구현이 비교적 간단하다.| 병렬 처리해야 하는 만큼 프로세스 생성
각 프로세스들이 독립적으로 움직이며, 자원이 서로 다르게 할당됨 | 프로세스가 많이 생성될 수록 메모리 사용 증가
-   | 프로세스 스케쥴링 횟수가 많아지고, 프로그램의 성능이 저하됨
-   | 동시에 개설할 수 있는 프로세스 개수 제한


### 2. 멀티스레드

장점 | 단점
---- | ----
멀티 프로세스 처리보다 자원 점유가 적으며, 스레드 생성 시간이 짦음 | 전역 변수 공유
- | 동기화 문제가 발생할 수 있다.



<br><br>
오랜만에 본 면접이라서 그런지 긴장도 많이 하고 헛소리도 많이 한 것 같다.<br>
경험이라 생각하고 앞으로는 좀 더 수월한 면접이 될 수 있도록 준비를 해야할 것 같다.
